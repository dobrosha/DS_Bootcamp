### Задание

**Описательная статистика**

**Директория для сдачи**: ex04/  
**Файлы для сдачи**: counter.sh, hh_uniq_positions.csv  
**Разрешённые функции**: нет ограничений  

Прежде чем перейти к более сложным анализам, полезно получить базовые сведения о ваших данных. В этом упражнении вам нужно будет подсчитать уникальные позиции в вашем файле. Это поможет понять, насколько ваши данные перекошены: например, может быть больше старших позиций, чем младших. Эти факты могут быть полезны для дальнейшего анализа.

Напишите shell-скрипт под названием `counter.sh`, который:

1. Подсчитывает уникальные значения в столбце `name` в файле, подготовленном в предыдущем упражнении.
2. Сортирует таблицу по этому количеству в порядке убывания.
3. Сохраняет результат в CSV-файл `hh_uniq_positions.csv`.

Файл CSV должен содержать заголовки в первой строке, как показано в примере:

```
"name","count"
"Junior",10
"Middle",5
"Senior",3
```

### Решение

Вот шаги и объяснения для выполнения этого задания:

1. **Подсчитать уникальные значения в столбце `name`**:
   - Мы будем использовать `awk` для подсчета количества уникальных значений.

2. **Отсортировать результаты по количеству в порядке убывания**:
   - Используем `sort` для сортировки данных.

3. **Сохранить результат в файл `hh_uniq_positions.csv`**:
   - Записываем результат в CSV-файл.
   

### Объяснение

1. **Проверка наличия файла**:
   - Скрипт проверяет, существует ли файл `hh_positions.csv`, созданный в предыдущем упражнении. Если файл отсутствует, скрипт завершится с ошибкой.

2. **Подсчет уникальных значений**:
   - `awk -F,` задает разделитель полей как запятую.
   - `NR > 1` пропускает первую строку (заголовок).
   - `positions[$3]++` считает количество вхождений значений из третьего столбца (`name`).

3. **Форматирование и сортировка**:
   - `print "\"name\",\"count\""` выводит заголовок.
   - `for (position in positions)` выводит каждое уникальное значение и его количество.
   - `sort -t, -k2,2nr` сортирует строки по количеству в убывающем порядке.

4. **Сохранение и проверка результата**:
   - Результат сохраняется в `hh_uniq_positions.csv`.
   - Проверяется успешность выполнения команды и выводится соответствующее сообщение.

### Запуск скрипта

Чтобы сделать скрипт исполняемым, нужно выполнить команду:

```sh
chmod +x counter.sh
```

Запуск скрипта выполняется так:

```sh
./counter.sh
```